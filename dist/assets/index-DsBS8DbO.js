import{aw as Q,ay as bt,aX as y,aC as Oe,ap as me,aY as be,aZ as Dt,ac as Ct,a_ as Rt,a$ as Pt,b0 as wt,b1 as X,b2 as Mt,b3 as J,b4 as Lt,a2 as m,b5 as Z}from"./main-Co8PVOft.js";class Bt extends Q{constructor({domain:s}){super(`Invalid domain "${bt(s)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class Ht extends Q{constructor({primaryType:s,types:t}){super(`Invalid primary type \`${s}\` must be one of \`${JSON.stringify(Object.keys(t))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class Gt extends Q{constructor({type:s}){super(`Struct type "${s}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function Ut(e){const{domain:s={},message:t,primaryType:n}=e,o={EIP712Domain:qt({domain:s}),...e.types};kt({domain:s,message:t,primaryType:n,types:o});const a=["0x1901"];return s&&a.push(jt({domain:s,types:o})),n!=="EIP712Domain"&&a.push(De({data:t,primaryType:n,types:o})),y(Oe(a))}function jt({domain:e,types:s}){return De({data:e,primaryType:"EIP712Domain",types:s})}function De({data:e,primaryType:s,types:t}){const n=Ce({data:e,primaryType:s,types:t});return y(n)}function Ce({data:e,primaryType:s,types:t}){const n=[{type:"bytes32"}],o=[Wt({primaryType:s,types:t})];for(const a of t[s]){const[u,f]=Pe({types:t,name:a.name,type:a.type,value:e[a.name]});n.push(u),o.push(f)}return me(n,o)}function Wt({primaryType:e,types:s}){const t=be(Vt({primaryType:e,types:s}));return y(t)}function Vt({primaryType:e,types:s}){let t="";const n=Re({primaryType:e,types:s});n.delete(e);const o=[e,...Array.from(n).sort()];for(const a of o)t+=`${a}(${s[a].map(({name:u,type:f})=>`${f} ${u}`).join(",")})`;return t}function Re({primaryType:e,types:s},t=new Set){const n=e.match(/^\w*/u),o=n==null?void 0:n[0];if(t.has(o)||s[o]===void 0)return t;t.add(o);for(const a of s[o])Re({primaryType:a.type,types:s},t);return t}function Pe({types:e,name:s,type:t,value:n}){if(e[t]!==void 0)return[{type:"bytes32"},y(Ce({data:n,primaryType:t,types:e}))];if(t==="bytes")return n=`0x${(n.length%2?"0":"")+n.slice(2)}`,[{type:"bytes32"},y(n)];if(t==="string")return[{type:"bytes32"},y(be(n))];if(t.lastIndexOf("]")===t.length-1){const o=t.slice(0,t.lastIndexOf("[")),a=n.map(u=>Pe({name:s,type:o,types:e,value:u}));return[{type:"bytes32"},y(me(a.map(([u])=>u),a.map(([,u])=>u)))]}return[{type:t},n]}function kt(e){const{domain:s,message:t,primaryType:n,types:o}=e,a=(u,f)=>{for(const E of u){const{name:T,type:h}=E,_=f[T],L=h.match(Dt);if(L&&(typeof _=="number"||typeof _=="bigint")){const[q,N,K]=L;Ct(_,{signed:N==="int",size:Number.parseInt(K)/8})}if(h==="address"&&typeof _=="string"&&!Rt(_))throw new Pt({address:_});const B=h.match(wt);if(B){const[q,N]=B;if(N&&X(_)!==Number.parseInt(N))throw new Mt({expectedSize:Number.parseInt(N),givenSize:X(_)})}const H=o[h];H&&(Kt(h),a(H,_))}};if(o.EIP712Domain&&s){if(typeof s!="object")throw new Bt({domain:s});a(o.EIP712Domain,s)}if(n!=="EIP712Domain")if(o[n])a(o[n],t);else throw new Ht({primaryType:n,types:o})}function qt({domain:e}){return[typeof(e==null?void 0:e.name)=="string"&&{name:"name",type:"string"},(e==null?void 0:e.version)&&{name:"version",type:"string"},(typeof(e==null?void 0:e.chainId)=="number"||typeof(e==null?void 0:e.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(e==null?void 0:e.verifyingContract)&&{name:"verifyingContract",type:"address"},(e==null?void 0:e.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Kt(e){if(e==="address"||e==="bool"||e==="string"||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new Gt({type:e})}const Ft=`Ethereum Signed Message:
`;function Xt(e){const s=typeof e=="string"?J(e):typeof e.raw=="string"?e.raw:Lt(e.raw),t=J(`${Ft}${X(s)}`);return Oe([t,s])}function $t(e,s){return y(Xt(e),s)}const we=()=>"9.1.0",Qt=e=>e.toString(16).padStart(2,"0"),zt=e=>{const s=new Uint8Array(e/2);return window.crypto.getRandomValues(s),Array.from(s,Qt).join("")},Yt=()=>typeof window<"u"?zt(10):new Date().getTime().toString(36);class M{}M.makeRequest=(e,s)=>({id:Yt(),method:e,params:s,env:{sdkVersion:we()}});M.makeResponse=(e,s,t)=>({id:e,success:!0,version:t,data:s});M.makeErrorResponse=(e,s,t)=>({id:e,success:!1,error:s,version:t});var g;(function(e){e.sendTransactions="sendTransactions",e.rpcCall="rpcCall",e.getChainInfo="getChainInfo",e.getSafeInfo="getSafeInfo",e.getTxBySafeTxHash="getTxBySafeTxHash",e.getSafeBalances="getSafeBalances",e.signMessage="signMessage",e.signTypedMessage="signTypedMessage",e.getEnvironmentInfo="getEnvironmentInfo",e.getOffChainSignature="getOffChainSignature",e.requestAddressBook="requestAddressBook",e.wallet_getPermissions="wallet_getPermissions",e.wallet_requestPermissions="wallet_requestPermissions"})(g||(g={}));var G;(function(e){e.requestAddressBook="requestAddressBook"})(G||(G={}));class Jt{constructor(s=null,t=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer=typeof window>"u",this.isValidMessage=({origin:n,data:o,source:a})=>{const u=!o,f=!this.isServer&&a===window.parent,E=typeof o.version<"u"&&parseInt(o.version.split(".")[0]),T=typeof E=="number"&&E>=1;let h=!0;return Array.isArray(this.allowedOrigins)&&(h=this.allowedOrigins.find(_=>_.test(n))!==void 0),!u&&f&&T&&h},this.logIncomingMessage=n=>{console.info(`Safe Apps SDK v1: A message was received from origin ${n.origin}. `,n.data)},this.onParentMessage=n=>{this.isValidMessage(n)&&(this.debugMode&&this.logIncomingMessage(n),this.handleIncomingMessage(n.data))},this.handleIncomingMessage=n=>{const{id:o}=n,a=this.callbacks.get(o);a&&(a(n),this.callbacks.delete(o))},this.send=(n,o)=>{const a=M.makeRequest(n,o);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(a,"*"),new Promise((u,f)=>{this.callbacks.set(a.id,E=>{if(!E.success){f(new Error(E.error));return}u(E)})})},this.allowedOrigins=s,this.debugMode=t,this.isServer||window.addEventListener("message",this.onParentMessage)}}const z=e=>typeof e=="object"&&e!=null&&"domain"in e&&"types"in e&&"message"in e;var P={},C={},R={},Y=m&&m.__awaiter||function(e,s,t,n){function o(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function f(h){try{T(n.next(h))}catch(_){u(_)}}function E(h){try{T(n.throw(h))}catch(_){u(_)}}function T(h){h.done?a(h.value):o(h.value).then(f,E)}T((n=n.apply(e,s||[])).next())})};Object.defineProperty(R,"__esModule",{value:!0});R.insertParams=en;R.stringifyQuery=tn;R.fetchData=nn;R.getData=sn;const Zt=e=>typeof e=="object"&&e!==null&&("code"in e||"statusCode"in e)&&"message"in e;function xt(e,s,t){return e.replace(new RegExp(`\\{${s}\\}`,"g"),t)}function en(e,s){return s?Object.keys(s).reduce((t,n)=>xt(t,n,String(s[n])),e):e}function tn(e){if(!e)return"";const s=new URLSearchParams;Object.keys(e).forEach(n=>{e[n]!=null&&s.append(n,String(e[n]))});const t=s.toString();return t?`?${t}`:""}function Me(e){return Y(this,void 0,void 0,function*(){var s;let t;try{t=yield e.json()}catch{t={}}if(!e.ok){const n=Zt(t)?`CGW error - ${(s=t.code)!==null&&s!==void 0?s:t.statusCode}: ${t.message}`:`CGW error - status ${e.statusText}`;throw new Error(n)}return t})}function nn(e,s,t,n,o){return Y(this,void 0,void 0,function*(){const a=Object.assign({"Content-Type":"application/json"},n),u={method:s??"POST",headers:a};o&&(u.credentials=o),t!=null&&(u.body=typeof t=="string"?t:JSON.stringify(t));const f=yield fetch(e,u);return Me(f)})}function sn(e,s,t){return Y(this,void 0,void 0,function*(){const n={method:"GET"};s&&(n.headers=Object.assign(Object.assign({},s),{"Content-Type":"application/json"})),t&&(n.credentials=t);const o=yield fetch(e,n);return Me(o)})}Object.defineProperty(C,"__esModule",{value:!0});C.postEndpoint=an;C.putEndpoint=rn;C.deleteEndpoint=on;C.getEndpoint=cn;const O=R;function U(e,s,t,n){const o=(0,O.insertParams)(s,t),a=(0,O.stringifyQuery)(n);return`${e}${o}${a}`}function an(e,s,t){const n=U(e,s,t==null?void 0:t.path,t==null?void 0:t.query);return(0,O.fetchData)(n,"POST",t==null?void 0:t.body,t==null?void 0:t.headers,t==null?void 0:t.credentials)}function rn(e,s,t){const n=U(e,s,t==null?void 0:t.path,t==null?void 0:t.query);return(0,O.fetchData)(n,"PUT",t==null?void 0:t.body,t==null?void 0:t.headers,t==null?void 0:t.credentials)}function on(e,s,t){const n=U(e,s,t==null?void 0:t.path,t==null?void 0:t.query);return(0,O.fetchData)(n,"DELETE",t==null?void 0:t.body,t==null?void 0:t.headers,t==null?void 0:t.credentials)}function cn(e,s,t,n){if(n)return(0,O.getData)(n,void 0,t==null?void 0:t.credentials);const o=U(e,s,t==null?void 0:t.path,t==null?void 0:t.query);return(0,O.getData)(o,t==null?void 0:t.headers,t==null?void 0:t.credentials)}var j={};Object.defineProperty(j,"__esModule",{value:!0});j.DEFAULT_BASE_URL=void 0;j.DEFAULT_BASE_URL="https://safe-client.safe.global";var W={};Object.defineProperty(W,"__esModule",{value:!0});W.ImplementationVersionState=void 0;var x;(function(e){e.UP_TO_DATE="UP_TO_DATE",e.OUTDATED="OUTDATED",e.UNKNOWN="UNKNOWN"})(x||(W.ImplementationVersionState=x={}));var A={};Object.defineProperty(A,"__esModule",{value:!0});A.SafeAppSocialPlatforms=A.SafeAppFeatures=A.SafeAppAccessPolicyTypes=void 0;var ee;(function(e){e.NoRestrictions="NO_RESTRICTIONS",e.DomainAllowlist="DOMAIN_ALLOWLIST"})(ee||(A.SafeAppAccessPolicyTypes=ee={}));var te;(function(e){e.BATCHED_TRANSACTIONS="BATCHED_TRANSACTIONS"})(te||(A.SafeAppFeatures=te={}));var ne;(function(e){e.TWITTER="TWITTER",e.GITHUB="GITHUB",e.DISCORD="DISCORD",e.TELEGRAM="TELEGRAM"})(ne||(A.SafeAppSocialPlatforms=ne={}));var l={};Object.defineProperty(l,"__esModule",{value:!0});l.LabelValue=l.StartTimeValue=l.DurationType=l.DetailedExecutionInfoType=l.TransactionListItemType=l.ConflictType=l.TransactionInfoType=l.SettingsInfoType=l.TransactionTokenType=l.TransferDirection=l.TransactionStatus=l.Operation=void 0;var se;(function(e){e[e.CALL=0]="CALL",e[e.DELEGATE=1]="DELEGATE"})(se||(l.Operation=se={}));var ae;(function(e){e.AWAITING_CONFIRMATIONS="AWAITING_CONFIRMATIONS",e.AWAITING_EXECUTION="AWAITING_EXECUTION",e.CANCELLED="CANCELLED",e.FAILED="FAILED",e.SUCCESS="SUCCESS"})(ae||(l.TransactionStatus=ae={}));var ie;(function(e){e.INCOMING="INCOMING",e.OUTGOING="OUTGOING",e.UNKNOWN="UNKNOWN"})(ie||(l.TransferDirection=ie={}));var re;(function(e){e.ERC20="ERC20",e.ERC721="ERC721",e.NATIVE_COIN="NATIVE_COIN"})(re||(l.TransactionTokenType=re={}));var oe;(function(e){e.SET_FALLBACK_HANDLER="SET_FALLBACK_HANDLER",e.ADD_OWNER="ADD_OWNER",e.REMOVE_OWNER="REMOVE_OWNER",e.SWAP_OWNER="SWAP_OWNER",e.CHANGE_THRESHOLD="CHANGE_THRESHOLD",e.CHANGE_IMPLEMENTATION="CHANGE_IMPLEMENTATION",e.ENABLE_MODULE="ENABLE_MODULE",e.DISABLE_MODULE="DISABLE_MODULE",e.SET_GUARD="SET_GUARD",e.DELETE_GUARD="DELETE_GUARD"})(oe||(l.SettingsInfoType=oe={}));var ce;(function(e){e.TRANSFER="Transfer",e.SETTINGS_CHANGE="SettingsChange",e.CUSTOM="Custom",e.CREATION="Creation",e.SWAP_ORDER="SwapOrder",e.TWAP_ORDER="TwapOrder",e.SWAP_TRANSFER="SwapTransfer",e.NATIVE_STAKING_DEPOSIT="NativeStakingDeposit",e.NATIVE_STAKING_VALIDATORS_EXIT="NativeStakingValidatorsExit",e.NATIVE_STAKING_WITHDRAW="NativeStakingWithdraw"})(ce||(l.TransactionInfoType=ce={}));var ue;(function(e){e.NONE="None",e.HAS_NEXT="HasNext",e.END="End"})(ue||(l.ConflictType=ue={}));var de;(function(e){e.TRANSACTION="TRANSACTION",e.LABEL="LABEL",e.CONFLICT_HEADER="CONFLICT_HEADER",e.DATE_LABEL="DATE_LABEL"})(de||(l.TransactionListItemType=de={}));var le;(function(e){e.MULTISIG="MULTISIG",e.MODULE="MODULE"})(le||(l.DetailedExecutionInfoType=le={}));var fe;(function(e){e.AUTO="AUTO",e.LIMIT_DURATION="LIMIT_DURATION"})(fe||(l.DurationType=fe={}));var he;(function(e){e.AT_MINING_TIME="AT_MINING_TIME",e.AT_EPOCH="AT_EPOCH"})(he||(l.StartTimeValue=he={}));var ge;(function(e){e.Queued="Queued",e.Next="Next"})(ge||(l.LabelValue=ge={}));var S={};Object.defineProperty(S,"__esModule",{value:!0});S.FEATURES=S.GAS_PRICE_TYPE=S.RPC_AUTHENTICATION=void 0;var Ee;(function(e){e.API_KEY_PATH="API_KEY_PATH",e.NO_AUTHENTICATION="NO_AUTHENTICATION",e.UNKNOWN="UNKNOWN"})(Ee||(S.RPC_AUTHENTICATION=Ee={}));var _e;(function(e){e.ORACLE="ORACLE",e.FIXED="FIXED",e.FIXED_1559="FIXED1559",e.UNKNOWN="UNKNOWN"})(_e||(S.GAS_PRICE_TYPE=_e={}));var pe;(function(e){e.ERC721="ERC721",e.SAFE_APPS="SAFE_APPS",e.CONTRACT_INTERACTION="CONTRACT_INTERACTION",e.DOMAIN_LOOKUP="DOMAIN_LOOKUP",e.SPENDING_LIMIT="SPENDING_LIMIT",e.EIP1559="EIP1559",e.SAFE_TX_GAS_OPTIONAL="SAFE_TX_GAS_OPTIONAL",e.TX_SIMULATION="TX_SIMULATION",e.EIP1271="EIP1271"})(pe||(S.FEATURES=pe={}));var V={};Object.defineProperty(V,"__esModule",{value:!0});V.TokenType=void 0;var Ie;(function(e){e.ERC20="ERC20",e.ERC721="ERC721",e.NATIVE_TOKEN="NATIVE_TOKEN",e.UNKNOWN="UNKNOWN"})(Ie||(V.TokenType=Ie={}));var Le={};Object.defineProperty(Le,"__esModule",{value:!0});var b={};Object.defineProperty(b,"__esModule",{value:!0});b.NativeStakingStatus=b.ConfirmationViewTypes=void 0;var Te;(function(e){e.GENERIC="GENERIC",e.COW_SWAP_ORDER="COW_SWAP_ORDER",e.COW_SWAP_TWAP_ORDER="COW_SWAP_TWAP_ORDER",e.KILN_NATIVE_STAKING_DEPOSIT="KILN_NATIVE_STAKING_DEPOSIT",e.KILN_NATIVE_STAKING_VALIDATORS_EXIT="KILN_NATIVE_STAKING_VALIDATORS_EXIT",e.KILN_NATIVE_STAKING_WITHDRAW="KILN_NATIVE_STAKING_WITHDRAW"})(Te||(b.ConfirmationViewTypes=Te={}));var ve;(function(e){e.NOT_STAKED="NOT_STAKED",e.ACTIVATING="ACTIVATING",e.DEPOSIT_IN_PROGRESS="DEPOSIT_IN_PROGRESS",e.ACTIVE="ACTIVE",e.EXIT_REQUESTED="EXIT_REQUESTED",e.EXITING="EXITING",e.EXITED="EXITED",e.SLASHED="SLASHED"})(ve||(b.NativeStakingStatus=ve={}));var D={};Object.defineProperty(D,"__esModule",{value:!0});D.SafeMessageStatus=D.SafeMessageListItemType=void 0;var ye;(function(e){e.DATE_LABEL="DATE_LABEL",e.MESSAGE="MESSAGE"})(ye||(D.SafeMessageListItemType=ye={}));var Ae;(function(e){e.NEEDS_CONFIRMATION="NEEDS_CONFIRMATION",e.CONFIRMED="CONFIRMED"})(Ae||(D.SafeMessageStatus=Ae={}));var k={};Object.defineProperty(k,"__esModule",{value:!0});k.DeviceType=void 0;var Se;(function(e){e.ANDROID="ANDROID",e.IOS="IOS",e.WEB="WEB"})(Se||(k.DeviceType=Se={}));var Be={};Object.defineProperty(Be,"__esModule",{value:!0});(function(e){var s=m&&m.__createBinding||(Object.create?function(i,r,c,d){d===void 0&&(d=c);var I=Object.getOwnPropertyDescriptor(r,c);(!I||("get"in I?!r.__esModule:I.writable||I.configurable))&&(I={enumerable:!0,get:function(){return r[c]}}),Object.defineProperty(i,d,I)}:function(i,r,c,d){d===void 0&&(d=c),i[d]=r[c]}),t=m&&m.__exportStar||function(i,r){for(var c in i)c!=="default"&&!Object.prototype.hasOwnProperty.call(r,c)&&s(r,i,c)};Object.defineProperty(e,"__esModule",{value:!0}),e.setBaseUrl=void 0,e.relayTransaction=f,e.getRelayCount=E,e.getSafeInfo=T,e.getIncomingTransfers=h,e.getModuleTransactions=_,e.getMultisigTransactions=L,e.getBalances=B,e.getFiatCurrencies=H,e.getOwnedSafes=q,e.getAllOwnedSafes=N,e.getCollectibles=K,e.getCollectiblesPage=Ue,e.getTransactionHistory=je,e.getTransactionQueue=We,e.getTransactionDetails=Ve,e.deleteTransaction=ke,e.postSafeGasEstimation=qe,e.getNonces=Ke,e.proposeTransaction=Fe,e.getConfirmationView=Xe,e.getTxPreview=$e,e.getChainsConfig=Qe,e.getChainConfig=ze,e.getSafeApps=Ye,e.getMasterCopies=Je,e.getDecodedData=Ze,e.getSafeMessages=xe,e.getSafeMessage=et,e.proposeSafeMessage=tt,e.confirmSafeMessage=nt,e.getDelegates=st,e.registerDevice=at,e.unregisterSafe=it,e.unregisterDevice=rt,e.registerEmail=ot,e.changeEmail=ct,e.resendEmailVerificationCode=ut,e.verifyEmail=dt,e.getRegisteredEmail=lt,e.deleteRegisteredEmail=ft,e.registerRecoveryModule=ht,e.unsubscribeSingle=gt,e.unsubscribeAll=Et,e.getSafeOverviews=_t,e.getContract=pt,e.getAuthNonce=It,e.verifyAuth=Tt,e.createAccount=vt,e.getAccount=yt,e.deleteAccount=At,e.getAccountDataTypes=St,e.getAccountDataSettings=Nt,e.putAccountDataSettings=Ot,e.getIndexingStatus=mt;const n=C,o=j;t(W,e),t(A,e),t(l,e),t(S,e),t(V,e),t(Le,e),t(b,e),t(D,e),t(k,e),t(Be,e);let a=o.DEFAULT_BASE_URL;const u=i=>{a=i};e.setBaseUrl=u;function f(i,r){return(0,n.postEndpoint)(a,"/v1/chains/{chainId}/relay",{path:{chainId:i},body:r})}function E(i,r){return(0,n.getEndpoint)(a,"/v1/chains/{chainId}/relay/{address}",{path:{chainId:i,address:r}})}function T(i,r){return(0,n.getEndpoint)(a,"/v1/chains/{chainId}/safes/{address}",{path:{chainId:i,address:r}})}function h(i,r,c,d){return(0,n.getEndpoint)(a,"/v1/chains/{chainId}/safes/{address}/incoming-transfers/",{path:{chainId:i,address:r},query:c},d)}function _(i,r,c,d){return(0,n.getEndpoint)(a,"/v1/chains/{chainId}/safes/{address}/module-transactions/",{path:{chainId:i,address:r},query:c},d)}function L(i,r,c,d){return(0,n.getEndpoint)(a,"/v1/chains/{chainId}/safes/{address}/multisig-transactions/",{path:{chainId:i,address:r},query:c},d)}function B(i,r,c="usd",d={}){return(0,n.getEndpoint)(a,"/v1/chains/{chainId}/safes/{address}/balances/{currency}",{path:{chainId:i,address:r,currency:c},query:d})}function H(){return(0,n.getEndpoint)(a,"/v1/balances/supported-fiat-codes")}function q(i,r){return(0,n.getEndpoint)(a,"/v1/chains/{chainId}/owners/{address}/safes",{path:{chainId:i,address:r}})}function N(i){return(0,n.getEndpoint)(a,"/v1/owners/{address}/safes",{path:{address:i}})}function K(i,r,c={}){return(0,n.getEndpoint)(a,"/v1/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:i,address:r},query:c})}function Ue(i,r,c={},d){return(0,n.getEndpoint)(a,"/v2/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:i,address:r},query:c},d)}function je(i,r,c={},d){return(0,n.getEndpoint)(a,"/v1/chains/{chainId}/safes/{safe_address}/transactions/history",{path:{chainId:i,safe_address:r},query:c},d)}function We(i,r,c={},d){return(0,n.getEndpoint)(a,"/v1/chains/{chainId}/safes/{safe_address}/transactions/queued",{path:{chainId:i,safe_address:r},query:c},d)}function Ve(i,r){return(0,n.getEndpoint)(a,"/v1/chains/{chainId}/transactions/{transactionId}",{path:{chainId:i,transactionId:r}})}function ke(i,r,c){return(0,n.deleteEndpoint)(a,"/v1/chains/{chainId}/transactions/{safeTxHash}",{path:{chainId:i,safeTxHash:r},body:{signature:c}})}function qe(i,r,c){return(0,n.postEndpoint)(a,"/v2/chains/{chainId}/safes/{safe_address}/multisig-transactions/estimations",{path:{chainId:i,safe_address:r},body:c})}function Ke(i,r){return(0,n.getEndpoint)(a,"/v1/chains/{chainId}/safes/{safe_address}/nonces",{path:{chainId:i,safe_address:r}})}function Fe(i,r,c){return(0,n.postEndpoint)(a,"/v1/chains/{chainId}/transactions/{safe_address}/propose",{path:{chainId:i,safe_address:r},body:c})}function Xe(i,r,c,d,I,F){return(0,n.postEndpoint)(a,"/v1/chains/{chainId}/safes/{safe_address}/views/transaction-confirmation",{path:{chainId:i,safe_address:r},body:{operation:c,data:d,to:I,value:F}})}function $e(i,r,c,d,I,F){return(0,n.postEndpoint)(a,"/v1/chains/{chainId}/transactions/{safe_address}/preview",{path:{chainId:i,safe_address:r},body:{operation:c,data:d,to:I,value:F}})}function Qe(i){return(0,n.getEndpoint)(a,"/v1/chains",{query:i})}function ze(i){return(0,n.getEndpoint)(a,"/v1/chains/{chainId}",{path:{chainId:i}})}function Ye(i,r={}){return(0,n.getEndpoint)(a,"/v1/chains/{chainId}/safe-apps",{path:{chainId:i},query:r})}function Je(i){return(0,n.getEndpoint)(a,"/v1/chains/{chainId}/about/master-copies",{path:{chainId:i}})}function Ze(i,r,c,d){return(0,n.postEndpoint)(a,"/v1/chains/{chainId}/data-decoder",{path:{chainId:i},body:{operation:r,data:c,to:d}})}function xe(i,r,c){return(0,n.getEndpoint)(a,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:i,safe_address:r},query:{}},c)}function et(i,r){return(0,n.getEndpoint)(a,"/v1/chains/{chainId}/messages/{message_hash}",{path:{chainId:i,message_hash:r}})}function tt(i,r,c){return(0,n.postEndpoint)(a,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:i,safe_address:r},body:c})}function nt(i,r,c){return(0,n.postEndpoint)(a,"/v1/chains/{chainId}/messages/{message_hash}/signatures",{path:{chainId:i,message_hash:r},body:c})}function st(i,r={}){return(0,n.getEndpoint)(a,"/v2/chains/{chainId}/delegates",{path:{chainId:i},query:r})}function at(i){return(0,n.postEndpoint)(a,"/v1/register/notifications",{body:i})}function it(i,r,c){return(0,n.deleteEndpoint)(a,"/v1/chains/{chainId}/notifications/devices/{uuid}/safes/{safe_address}",{path:{chainId:i,safe_address:r,uuid:c}})}function rt(i,r){return(0,n.deleteEndpoint)(a,"/v1/chains/{chainId}/notifications/devices/{uuid}",{path:{chainId:i,uuid:r}})}function ot(i,r,c,d){return(0,n.postEndpoint)(a,"/v1/chains/{chainId}/safes/{safe_address}/emails",{path:{chainId:i,safe_address:r},body:c,headers:d})}function ct(i,r,c,d,I){return(0,n.putEndpoint)(a,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:i,safe_address:r,signer:c},body:d,headers:I})}function ut(i,r,c){return(0,n.postEndpoint)(a,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}/verify-resend",{path:{chainId:i,safe_address:r,signer:c},body:""})}function dt(i,r,c,d){return(0,n.putEndpoint)(a,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}/verify",{path:{chainId:i,safe_address:r,signer:c},body:d})}function lt(i,r,c,d){return(0,n.getEndpoint)(a,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:i,safe_address:r,signer:c},headers:d})}function ft(i,r,c,d){return(0,n.deleteEndpoint)(a,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:i,safe_address:r,signer:c},headers:d})}function ht(i,r,c){return(0,n.postEndpoint)(a,"/v1/chains/{chainId}/safes/{safe_address}/recovery",{path:{chainId:i,safe_address:r},body:c})}function gt(i){return(0,n.deleteEndpoint)(a,"/v1/subscriptions",{query:i})}function Et(i){return(0,n.deleteEndpoint)(a,"/v1/subscriptions/all",{query:i})}function _t(i,r){return(0,n.getEndpoint)(a,"/v1/safes",{query:Object.assign(Object.assign({},r),{safes:i.join(",")})})}function pt(i,r){return(0,n.getEndpoint)(a,"/v1/chains/{chainId}/contracts/{contractAddress}",{path:{chainId:i,contractAddress:r}})}function It(){return(0,n.getEndpoint)(a,"/v1/auth/nonce",{credentials:"include"})}function Tt(i){return(0,n.postEndpoint)(a,"/v1/auth/verify",{body:i,credentials:"include"})}function vt(i){return(0,n.postEndpoint)(a,"/v1/accounts",{body:i,credentials:"include"})}function yt(i){return(0,n.getEndpoint)(a,"/v1/accounts/{address}",{path:{address:i},credentials:"include"})}function At(i){return(0,n.deleteEndpoint)(a,"/v1/accounts/{address}",{path:{address:i},credentials:"include"})}function St(){return(0,n.getEndpoint)(a,"/v1/accounts/data-types")}function Nt(i){return(0,n.getEndpoint)(a,"/v1/accounts/{address}/data-settings",{path:{address:i},credentials:"include"})}function Ot(i,r){return(0,n.putEndpoint)(a,"/v1/accounts/{address}/data-settings",{path:{address:i},body:r,credentials:"include"})}function mt(i){return(0,n.getEndpoint)(a,"/v1/chains/{chainId}/about/indexing",{path:{chainId:i}})}})(P);class un{constructor(s){this.communicator=s}async getBySafeTxHash(s){if(!s)throw new Error("Invalid safeTxHash");return(await this.communicator.send(g.getTxBySafeTxHash,{safeTxHash:s})).data}async signMessage(s){const t={message:s};return(await this.communicator.send(g.signMessage,t)).data}async signTypedMessage(s){if(!z(s))throw new Error("Invalid typed data");return(await this.communicator.send(g.signTypedMessage,{typedData:s})).data}async send({txs:s,params:t}){if(!s||!s.length)throw new Error("No transactions were passed");const n={txs:s,params:t};return(await this.communicator.send(g.sendTransactions,n)).data}}const p={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"},v={defaultBlockParam:(e="latest")=>e,returnFullTxObjectParam:(e=!1)=>e,blockNumberToHex:e=>Number.isInteger(e)?`0x${e.toString(16)}`:e};class dn{constructor(s){this.communicator=s,this.call=this.buildRequest({call:p.eth_call,formatters:[null,v.defaultBlockParam]}),this.getBalance=this.buildRequest({call:p.eth_getBalance,formatters:[null,v.defaultBlockParam]}),this.getCode=this.buildRequest({call:p.eth_getCode,formatters:[null,v.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:p.eth_getStorageAt,formatters:[null,v.blockNumberToHex,v.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:p.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:p.eth_getBlockByHash,formatters:[null,v.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:p.eth_getBlockByNumber,formatters:[v.blockNumberToHex,v.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:p.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:p.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:p.eth_getTransactionCount,formatters:[null,v.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:p.eth_gasPrice}),this.getEstimateGas=t=>this.buildRequest({call:p.eth_estimateGas})([t]),this.setSafeSettings=this.buildRequest({call:p.safe_setSettings})}buildRequest(s){const{call:t,formatters:n}=s;return async o=>{n&&Array.isArray(o)&&n.forEach((f,E)=>{f&&(o[E]=f(o[E]))});const a={call:t,params:o||[]};return(await this.communicator.send(g.rpcCall,a)).data}}}const ln="0x1626ba7e",fn="0x20c13b0b",$=4001;class w extends Error{constructor(s,t,n){super(s),this.code=t,this.data=n,Object.setPrototypeOf(this,w.prototype)}}class He{constructor(s){this.communicator=s}async getPermissions(){return(await this.communicator.send(g.wallet_getPermissions,void 0)).data}async requestPermissions(s){if(!this.isPermissionRequestValid(s))throw new w("Permissions request is invalid",$);try{return(await this.communicator.send(g.wallet_requestPermissions,s)).data}catch{throw new w("Permissions rejected",$)}}isPermissionRequestValid(s){return s.every(t=>typeof t=="object"?Object.keys(t).every(n=>!!Object.values(G).includes(n)):!1)}}const Ne=(e,s)=>s.some(t=>t.parentCapability===e),hn=()=>(e,s,t)=>{const n=t.value;return t.value=async function(){const o=new He(this.communicator);let a=await o.getPermissions();if(Ne(s,a)||(a=await o.requestPermissions([{[s]:{}}])),!Ne(s,a))throw new w("Permissions rejected",$);return n.apply(this)},t};var gn=function(e,s,t,n){var o=arguments.length,a=o<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,t):n,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,s,t,n);else for(var f=e.length-1;f>=0;f--)(u=e[f])&&(a=(o<3?u(a):o>3?u(s,t,a):u(s,t))||a);return o>3&&a&&Object.defineProperty(s,t,a),a};class Ge{constructor(s){this.communicator=s}async getChainInfo(){return(await this.communicator.send(g.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(g.getSafeInfo,void 0)).data}async experimental_getBalances({currency:s="usd"}={}){return(await this.communicator.send(g.getSafeBalances,{currency:s})).data}async check1271Signature(s,t="0x"){const n=await this.getInfo(),o=Z({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[s,t]}),a={call:p.eth_call,params:[{to:n.safeAddress,data:o},"latest"]};try{return(await this.communicator.send(g.rpcCall,a)).data.slice(0,10).toLowerCase()===ln}catch{return!1}}async check1271SignatureBytes(s,t="0x"){const n=await this.getInfo(),o=Z({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[s,t]}),a={call:p.eth_call,params:[{to:n.safeAddress,data:o},"latest"]};try{return(await this.communicator.send(g.rpcCall,a)).data.slice(0,10).toLowerCase()===fn}catch{return!1}}calculateMessageHash(s){return $t(s)}calculateTypedMessageHash(s){const t=typeof s.domain.chainId=="object"?s.domain.chainId.toNumber():Number(s.domain.chainId);let n=s.primaryType;if(!n){const o=Object.values(s.types),a=Object.keys(s.types).filter(u=>o.every(f=>f.every(({type:E})=>E.replace("[","").replace("]","")!==u)));if(a.length===0||a.length>1)throw new Error("Please specify primaryType");n=a[0]}return Ut({message:s.message,domain:{...s.domain,chainId:t,verifyingContract:s.domain.verifyingContract,salt:s.domain.salt},types:s.types,primaryType:n})}async getOffChainSignature(s){return(await this.communicator.send(g.getOffChainSignature,s)).data}async isMessageSigned(s,t="0x"){let n;if(typeof s=="string"&&(n=async()=>{const o=this.calculateMessageHash(s);return await this.isMessageHashSigned(o,t)}),z(s)&&(n=async()=>{const o=this.calculateTypedMessageHash(s);return await this.isMessageHashSigned(o,t)}),n)return await n();throw new Error("Invalid message type")}async isMessageHashSigned(s,t="0x"){const n=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const o of n)if(await o(s,t))return!0;return!1}async getEnvironmentInfo(){return(await this.communicator.send(g.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(g.requestAddressBook,void 0)).data}}gn([hn()],Ge.prototype,"requestAddressBook",null);class En{constructor(s={}){const{allowedDomains:t=null,debug:n=!1}=s;this.communicator=new Jt(t,n),this.eth=new dn(this.communicator),this.txs=new un(this.communicator),this.safe=new Ge(this.communicator),this.wallet=new He(this.communicator)}}const pn=Object.freeze(Object.defineProperty({__proto__:null,MessageFormatter:M,get Methods(){return g},Operation:P.Operation,RPC_CALLS:p,get RestrictedMethods(){return G},TokenType:P.TokenType,TransactionStatus:P.TransactionStatus,TransferDirection:P.TransferDirection,default:En,getSDKVersion:we,isObjectEIP712TypedData:z},Symbol.toStringTag,{value:"Module"}));export{pn as e};
