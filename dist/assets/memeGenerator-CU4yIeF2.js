const y={Lawbsters:"https://raw.githubusercontent.com/wables411/wables411.github.io/main/images/collections/Lawbsters/",LawbStation:"https://raw.githubusercontent.com/wables411/wables411.github.io/main/images/collections/LawbStation/",Halloween:"https://raw.githubusercontent.com/wables411/wables411.github.io/main/images/collections/Halloween/",Lawbstarz:"https://raw.githubusercontent.com/wables411/wables411.github.io/main/images/collections/Lawbstarz/"};function E(){const l=document.getElementById("collection-selector");l?(console.log("Selector found:",l),Object.keys(y).forEach(t=>{console.log("Adding option:",t);const e=document.createElement("option");e.value=t,e.textContent=t,l.appendChild(e)})):console.error("Collection selector not found.")}async function I(){const l=document.getElementById("collection-selector"),t=document.getElementById("image-number");if(!l)throw new Error("Collection selector not found.");const e=l.value;if(!e)throw new Error("No collection selected. Please select a collection.");const a=y[e];if(!a)throw new Error(`Invalid collection: ${e}`);const s=100;let r;if(t&&t.value){if(r=parseInt(t.value),isNaN(r)||r<1||r>s)throw new Error(`Invalid image number. Please enter a number between 1 and ${s}.`)}else r=Math.floor(Math.random()*s)+1;const c=`${a}${e}${r}.jpg`;console.log("Fetching image:",c);try{const o=await fetch(c);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const n=await o.blob();return URL.createObjectURL(n)}catch(o){throw console.error("Error fetching image:",o),o}}function x(l){const t=l.data;for(let e=0;e<t.length;e+=4){const a=(t[e]+t[e+1]+t[e+2])/3;t[e]=t[e]+(t[e]-a)*2,t[e+1]=t[e+1]+(t[e+1]-a)*2,t[e+2]=t[e+2]+(t[e+2]-a)*2,t[e]=Math.min(255,Math.max(0,(t[e]-128)*1.5+128)),t[e+1]=Math.min(255,Math.max(0,(t[e+1]-128)*1.5+128)),t[e+2]=Math.min(255,Math.max(0,(t[e+2]-128)*1.5+128)),e>0&&e<t.length-4&&(t[e]=Math.min(255,Math.max(0,t[e]*2-(t[e-4]+t[e+4])/2)),t[e+1]=Math.min(255,Math.max(0,t[e+1]*2-(t[e-3]+t[e+5])/2)),t[e+2]=Math.min(255,Math.max(0,t[e+2]*2-(t[e-2]+t[e+6])/2)))}return l}function p(l,t,e,a=!1){return new Promise((s,r)=>{const c=new Image;c.crossOrigin="anonymous",c.onload=()=>{const o=document.createElement("canvas"),n=o.getContext("2d");if(o.width=c.width,o.height=c.height,n.clearRect(0,0,o.width,o.height),n.drawImage(c,0,0),a){const d=n.getImageData(0,0,o.width,o.height),g=x(d);n.putImageData(g,0,0)}const i=80;n.font=`${i}px Impact`,n.textAlign="center",n.fillStyle="white",n.strokeStyle="black",n.lineWidth=3;function m(d,g){let u=d.split(" "),w=[],h=u[0];for(let f=1;f<u.length;f++){let b=h+" "+u[f];n.measureText(b).width>g?(w.push(h),h=u[f]):h=b}return w.push(h),w}m(t,o.width-20).forEach((d,g)=>{n.fillText(d,o.width/2,i+g*i),n.strokeText(d,o.width/2,i+g*i)}),m(e,o.width-20).reverse().forEach((d,g)=>{n.fillText(d,o.width/2,o.height-10-g*i),n.strokeText(d,o.width/2,o.height-10-g*i)}),s(o.toDataURL())},c.onerror=r,c.src=l})}window.onload=()=>{console.log("Window loaded"),E();const l=document.getElementById("fetch-image"),t=document.getElementById("generate-meme"),e=document.getElementById("deep-fry");let a=null,s=!1;l?l.addEventListener("click",async()=>{try{a=await I();const r=document.getElementById("generated-meme");r?(r.src=a,r.style.display="block"):console.error("Generated meme image element not found.")}catch(r){console.error("Error:",r),alert(r.message)}}):console.error("Fetch image button not found."),t?t.addEventListener("click",async()=>{var n,i;const r=((n=document.getElementById("top-text"))==null?void 0:n.value)||"",c=((i=document.getElementById("bottom-text"))==null?void 0:i.value)||"",o=document.getElementById("generated-meme");if(!a){alert("Please fetch an image first.");return}try{const m=await p(a,r,c,s);o.src=m}catch(m){console.error("Error generating meme:",m),alert("Error generating meme. Please try again.")}}):console.error("Generate meme button not found."),e?e.addEventListener("click",async()=>{var n,i;if(!a){alert("Please fetch an image first.");return}const r=((n=document.getElementById("top-text"))==null?void 0:n.value)||"",c=((i=document.getElementById("bottom-text"))==null?void 0:i.value)||"",o=document.getElementById("generated-meme");s=!s,e.textContent=s?"Remove Deep Fry":"Deep Fry";try{const m=await p(a,r,c,s);o.src=m}catch(m){console.error("Error applying deep fry effect:",m),alert("Error applying deep fry effect. Please try again.")}}):console.error("Deep fry button not found.")};
